<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>è€å¨˜è‚šå­é¤“ - é¤é»æ¨è–¦ç³»çµ±</title>
  <style>
    body { font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif; background-color: #fff8f0; padding: 20px; }
    h1 { color: #c0392b; }
    .meal { border: 1px solid #ccc; padding: 10px; margin-top: 10px; background-color: #fff; }
    button { margin: 5px; }
    .favorites { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ğŸŒŸ è€å¨˜è‚šå­é¤“ - é¤é»æ¨è–¦ç³»çµ± ğŸŒŸ</h1>

  <label>è«‹é¸æ“‡å£å‘³åå¥½ï¼š
    <select id="preference">
      <option value="ä¸­å¼">ä¸­å¼</option>
      <option value="è¥¿å¼">è¥¿å¼</option>
      <option value="ç´ é£Ÿ">ç´ é£Ÿ</option>
    </select>
  </label>
  <button onclick="suggestMeal()">æ¨è–¦é¤é»</button>

  <div class="meal" id="mealDisplay"></div>

  <div>
    <button onclick="addToFavorites()">æ”¶è—é€™é“é¤é»</button>
    <button onclick="showFavorites()">æŸ¥çœ‹æˆ‘çš„æœ€æ„›</button>
  </div>

  <div class="favorites" id="favoritesDisplay"></div>

  <script>
    const MEALS_DB = {
      "æ—©é¤": {
        "ä¸­å¼": [
          { name: "è±†æ¼¿é…ç‡’é¤…", desc: "å‚³çµ±ä¸­å¼æ—©é¤ï¼Œé…¥è„†ç‡’é¤…æ­é…æº«ç†±è±†æ¼¿", calories: 450 },
          { name: "é¹¹è±†æ¼¿", desc: "åŠ å…¥é†¬æ²¹èˆ‡è”¥èŠ±çš„æº«è±†æ¼¿", calories: 320 }
        ],
        "è¥¿å¼": [
          { name: "ä¸‰æ˜æ²»", desc: "èµ·å¸ç«è…¿ä¸‰æ˜æ²»é…æŸ³æ©™æ±", calories: 480 },
          { name: "å¯é Œé…æ‹¿éµ", desc: "é…¥è„†å¯é Œæ­é…é¦™æ¿ƒæ‹¿éµ", calories: 520 }
        ],
        "ç´ é£Ÿ": [
          { name: "è”¬èœä¸‰æ˜æ²»", desc: "æ»¿æ»¿ç”Ÿèœèˆ‡è•ƒèŒ„ï¼Œæ¸…çˆ½å¥åº·", calories: 350 }
        ]
      },
      "åˆé¤": {
        "ä¸­å¼": [
          { name: "æ»·è‚‰é£¯", desc: "é¦™æ°£å››æº¢çš„æ»·è‚‰é…ç™½é£¯", calories: 650 },
          { name: "ç‰›è‚‰éºµ", desc: "ç´…ç‡’ç‰›è‚‰æ¹¯é ­é¦™æ¿ƒ", calories: 750 }
        ],
        "è¥¿å¼": [
          { name: "æ¼¢å ¡", desc: "ç‰›è‚‰æ¼¢å ¡åŠ èµ·å¸èˆ‡è–¯æ¢", calories: 800 },
          { name: "å‡±è–©æ²™æ‹‰", desc: "é…¥ç‚¸é›å¡Šèˆ‡å‡±è–©é†¬æ­é…ç”Ÿèœ", calories: 520 }
        ],
        "ç´ é£Ÿ": [
          { name: "é¦™è‡ç‡´é£¯", desc: "é¦™æ°£åè¶³çš„é¦™è‡èˆ‡ç™½é£¯", calories: 400 }
        ]
      },
      "æ™šé¤": {
        "ä¸­å¼": [
          { name: "ç«é‹", desc: "å¤šæ¨£è”¬èœèˆ‡è‚‰ç‰‡ï¼Œæº«æš–ä¸€æ•´æ™š", calories: 800 },
          { name: "ç‚’é’èœé…é£¯", desc: "æ¸…çˆ½å¥åº·çš„æ™šé¤é¸æ“‡", calories: 400 }
        ],
        "è¥¿å¼": [
          { name: "æŠ«è–©", desc: "ç¶“å…¸èµ·å¸æŠ«è–©", calories: 700 },
          { name: "è”¬èœæ¿ƒæ¹¯", desc: "é¦™æ¿ƒå¥¶æ²¹æ¹¯æ­é…éºµåŒ…", calories: 420 }
        ],
        "ç´ é£Ÿ": [
          { name: "æ¶¼éºµ", desc: "èŠéº»é†¬æ¶¼éºµï¼Œé–‹èƒƒåˆæ¸…çˆ½", calories: 390 }
        ]
      }
    };

    let currentMeal = null;
    let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

    function getCurrentMealPeriod() {
      const hour = new Date().getHours();
      if (hour >= 5 && hour < 11) return "æ—©é¤";
      if (hour >= 11 && hour < 17) return "åˆé¤";
      return "æ™šé¤";
    }

    function suggestMeal() {
      const preference = document.getElementById("preference").value;
      const period = getCurrentMealPeriod();
      const options = MEALS_DB[period][preference] || MEALS_DB[period]["ä¸­å¼"];
      currentMeal = options[Math.floor(Math.random() * options.length)];
      document.getElementById("mealDisplay").innerHTML =
        `<h3>ğŸ½ï¸ ã€${period}æ¨è–¦ã€‘${currentMeal.name}</h3>
        <p>${currentMeal.desc}</p>
        <p>ç†±é‡ï¼šç´„ ${currentMeal.calories} å¤§å¡</p>`;
    }

    function addToFavorites() {
      if (!currentMeal) return alert("è«‹å…ˆæ¨è–¦ä¸€å€‹é¤é»ï¼");
      if (!favorites.find(m => m.name === currentMeal.name)) {
        favorites.push(currentMeal);
        localStorage.setItem("favorites", JSON.stringify(favorites));
        alert(`âœ… å·²æ”¶è—ï¼š${currentMeal.name}`);
      } else {
        alert(`ğŸ“Œ ã€Œ${currentMeal.name}ã€å·²ç¶“åœ¨æœ€æ„›æ¸…å–®ä¸­`);
      }
    }

    function showFavorites() {
      if (favorites.length === 0) {
        document.getElementById("favoritesDisplay").innerHTML = "â— ä½ é‚„æ²’æœ‰æ”¶è—ä»»ä½•é¤é»ã€‚";
        return;
      }
      const list = favorites.map(m => 
        `<li>${m.name} - ${m.desc}ï¼ˆ${m.calories} å¤§å¡ï¼‰</li>`).join("");
      document.getElementById("favoritesDisplay").innerHTML = `<ul>${list}</ul>`;
    }
  </script>
</body>
</html>
